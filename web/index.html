<!DOCTYPE html>
<html lang="en">
<head>
    <base href="$FLUTTER_BASE_HREF"/>

    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/>
    <meta name="description"
          content="IGNOUE Solution Hub â€” Smart learning and course management web app built with Flutter."/>
    <meta name="keywords" content="IGNOUE, Solution Hub, Flutter Web, Courses, Learning"/>
    <meta name="author" content="IGNOUE Solution Hub"/>

    <title>IGNOUE Solution Hub</title>

    <!-- Progressive Web App -->
    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="apple-mobile-web-app-title" content="IGNOUE Solution Hub"/>
    <link rel="apple-touch-icon" href="icons/Icon-192.png"/>
    <link rel="manifest" href="manifest.json"/>
    <link rel="icon" type="image/png" href="favicon.png"/>


    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyDrC1vf81IVxYPfgOgd-bfXVH5aPJUciZk",
          authDomain: "ignoue-solution-point.firebaseapp.com",
          projectId: "ignoue-solution-point",
          storageBucket: "ignoue-solution-point.firebasestorage.app",
          messagingSenderId: "595105775633",
          appId: "1:595105775633:web:5b32c5f8d020857d22f1b0",
          measurementId: "G-8B7M0HWHP1"
        };
        firebase.initializeApp(firebaseConfig);
    </script>

    <!-- Smooth zoom transitions -->
    <style>
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
          overflow: hidden;
          background-color: #ffffff;
          transition: transform 0.3s ease, scale 0.3s ease;
          transform-origin: center center;
        }

        #flutter-container,
        canvas,
        #flt-glass-pane {
          transform-origin: center center;
          transition: transform 0.3s ease;
          image-rendering: -webkit-optimize-contrast;
        }

        /* Optional loading indicator */
        #loading {
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          font-family: Arial, sans-serif;
          color: #555;
        }
    </style>
</head>

<body>
<div id="loading">Loading IGNOU Solution Hub...</div>
<script src="flutter_bootstrap.js" async></script>

<!-- Re-enable zoom after Flutter loads and smooth-scale on zoom -->
<script>
    window.addEventListener('load', () => {
      // Hide loading text once Flutter app mounts
      const loader = document.getElementById('loading');
      if (loader) loader.style.display = 'none';

      // Ensure zoom enabled
      const meta = document.querySelector('meta[name="viewport"]');
      if (meta) {
        meta.setAttribute(
          'content',
          'width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes'
        );
      }

      // Smooth zoom handler
      let lastZoom = window.visualViewport?.scale || 1.0;
      const root = document.getElementById('flt-glass-pane') || document.body;

      if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', () => {
          const newZoom = window.visualViewport.scale;
          if (Math.abs(newZoom - lastZoom) > 0.01) {
            root.style.transform = `scale(${newZoom})`;
            root.style.transition = 'transform 0.3s ease';
            lastZoom = newZoom;
          }
        });
      }
    });
</script>
</body>
</html>
